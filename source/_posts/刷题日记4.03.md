---
title: 刷题日记4.03
date: 2025-04-03
updated: 2025-04-03
categories: 算法
---

今天继续stl的简单应用

# 1.CF4C Registration system

## 题目描述

### 题目背景

一个名为 "Berlanddesk" 的电子邮件系统即将在 Berland 上线运营。该电子邮件系统的管理员希望整个系统的建设可以尽早完成，因此他们找到了资深程序员您，希望您能够为他们开发一个用户注册系统的原型产品。

该系统的运行遵循以下原则:

新用户注册时，他将向系统发送一则内容为其用户名的请求，如果该用户名尚未存在于系统数据库内，则将该用户名插入数据库，同时用户得到回应信息 ```OK``` 表示其已经成功注册。如果用户请求的用户名已经存在于数据库内，那么系统将产生一个新的用户名并将其加入数据库。新用户名由用户请求的用户名与正整数 $i$ 构成，$i$ 为使 "用户名i" 尚未存在于数据库内的最小的 $i$。

## 输入格式

第一行一个整数 $n(1 \le n \le 10^5)$。接下来 $n$ 行，每行表示用户向系统发出的一则请求。每行内容均非空且均为由至多 $32$ 个小写拉丁字母组成的字符串。

## 输出格式

$n$ 行，每行表示系统对一则请求做出的回应。如果该用户名尚未存在于系统数据库内，则输出 ```OK``` 。如果用户请求的用户名已经被注册，则输出依照规则生成的新用户名。

## 输入输出样例 #1

### 输入 #1

```
4
abacaba
acaba
abacaba
acab
```

### 输出 #1

```
OK
OK
abacaba1
OK
```

## 输入输出样例 #2

### 输入 #2

```
6
first
first
second
second
third
third
```

### 输出 #2

```
OK
first1
OK
second1
OK
third1
```

## 今日题解

大体思路是set保存一份原始的，map记录出现次数。

```c++
#include<bits/stdc++.h>
using namespace std;
using ll = long long;

set<string> st;
map<string, int> mp;

int main() {
	ios::sync_with_stdio(0), cin.tie(0), cout.tie(0);
	
	int n;cin>>n;
	while(n--) {
		string s;cin>>s;
		//如果已存在
		if(st.find(s)!=st.end()) {
			mp[s]++;
			s=s+to_string(mp[s]);
			cout<<s<<'\n';
		}
		else {
			mp[s]=0;
			st.insert(s);
			cout<<"OK\n";	
		}
	}
    return 0;
}

```

# 2.CF4C Registration system

## 题目描述

### 题目背景

一个名为 "Berlanddesk" 的电子邮件系统即将在 Berland 上线运营。该电子邮件系统的管理员希望整个系统的建设可以尽早完成，因此他们找到了资深程序员您，希望您能够为他们开发一个用户注册系统的原型产品。

该系统的运行遵循以下原则:

新用户注册时，他将向系统发送一则内容为其用户名的请求，如果该用户名尚未存在于系统数据库内，则将该用户名插入数据库，同时用户得到回应信息 ```OK``` 表示其已经成功注册。如果用户请求的用户名已经存在于数据库内，那么系统将产生一个新的用户名并将其加入数据库。新用户名由用户请求的用户名与正整数 $i$ 构成，$i$ 为使 "用户名i" 尚未存在于数据库内的最小的 $i$。

## 输入格式

第一行一个整数 $n(1 \le n \le 10^5)$。接下来 $n$ 行，每行表示用户向系统发出的一则请求。每行内容均非空且均为由至多 $32$ 个小写拉丁字母组成的字符串。

## 输出格式

$n$ 行，每行表示系统对一则请求做出的回应。如果该用户名尚未存在于系统数据库内，则输出 ```OK``` 。如果用户请求的用户名已经被注册，则输出依照规则生成的新用户名。

## 输入输出样例 #1

### 输入 #1

```
4
abacaba
acaba
abacaba
acab
```

### 输出 #1

```
OK
OK
abacaba1
OK
```

## 输入输出样例 #2

### 输入 #2

```
6
first
first
second
second
third
third
```

### 输出 #2

```
OK
first1
OK
second1
OK
third1
```

## 今日题解：

写了两份，一份是暴力，一份是滑动窗口

暴力：

```c++
#include<bits/stdc++.h>
using namespace std;

int main() {
	ios::sync_with_stdio(0), cin.tie(0), cout.tie(0);

	int n, k;
	cin>>n>>k;
	vector<int> a(n+1);
	for(int i=1; i<=n; ++i) {
		cin>>a[i];
	}

	unordered_map<int, int> count;
	multiset<int> uniqueMax;

	for(int i=1; i<=n-k+1; ++i) {
		for(int j=i; j<=i+k-1; ++j) {
			count[a[j]]++;
			if(count[a[j]]==1) {
				uniqueMax.insert(a[j]);
			}
			if(count[a[j]]==2) {
				uniqueMax.erase(uniqueMax.find(a[j]));
			}
		}
		if(!uniqueMax.empty()) {
			cout<< *uniqueMax.rbegin()<<"\n";//输出最大数
			uniqueMax.clear();
		} else cout<<"Nothing\n";
		count.clear();
	}

	return 0;
}
```

滑动窗口：

```c++
#include<bits/stdc++.h>
using namespace std;

int main() {
	ios::sync_with_stdio(0), cin.tie(0), cout.tie(0);

	int n, k;
	cin>>n>>k;
	vector<int> a(n+1);
	for(int i=1; i<=n; ++i) {
		cin>>a[i];
	}

	unordered_map<int, int> count;
	multiset<int> uniqueMax;
	
	//初始化
	for(int i=1; i<=k;++i) {
		count[a[i]]++;
		if(count[a[i]]==1) {
			uniqueMax.insert(a[i]);
		}
		if(count[a[i]]==2) {//重复则删
			uniqueMax.erase(uniqueMax.find(a[i]));
		}
	}
		
	//后续滑动窗口
	for(int i=1;i<=n-k+1;++i) {
		
		if(uniqueMax.empty()) {
			cout<<"Nothing\n";
		}
		else cout<< *uniqueMax.rbegin() << '\n';
		
		
		if(i<n-k+1) {
			//移除前一个，如果发现移除了元素使符合条件，则需加入
			count[a[i]]--;
			if(count[a[i]]==1) {
				uniqueMax.insert(a[i]);
			}
			if(count[a[i]]==0 ){//如果已无一个在窗口中，则移除
				uniqueMax.erase(uniqueMax.find(a[i]));
			}
			//向前扩展一个
			count[a[i+k]]++;
			if(count[a[i+k]]==1) {
				uniqueMax.insert(a[i+k]);
			}
			if(count[a[i+k]]==2) {
				uniqueMax.erase(uniqueMax.find(a[i+k]));
			}
		}
		
	}


	return 0;
}
```

